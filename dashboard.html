<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Dashboard</title>

    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
   
    <!-- Line Graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Fade-in Animation CSS -->
    <style>
      /* Fade-in animation */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Apply the animation to the body */
      .fade-in {
        animation: fadeIn 1s ease-in-out; /* 1 second duration */
      }
    </style>
  </head>
  <body>
    <div class="grid-container">

      <!-- Header -->
      <header class="header">
        <div class="menu-icon" onclick="openSidebar()">
          <span class="material-icons-outlined">menu</span>
        </div>
        <div class="main-title">
          <h2>DASHBOARD</h2>
        </div>
      </header>
      <!-- End Header -->

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sidebar-title">
          <div class="sidebar-brand">
          </div>
          <span class="material-icons-outlined" onclick="closeSidebar()">close</span>
        </div>

        <ul class="sidebar-list">
          <li class="sidebar-list-item">
            <a href="dashboard.html">
              <span class="material-icons-outlined">poll</span> Dashboard
            </a>
          </li>
          <li class="sidebar-list-item">
            <!-- Link to farmers.html -->
            <a href="farmers.html">
              <span class="material-icons-outlined">groups</span> Farmers
            </a>
          </li>
          
          <li class="sidebar-list-item">
            <a href="info.html">
              <span class="material-icons-outlined">info</span> Info
            </a>
          </li>
          <li class="sidebar-list-item-logout">
            <a href="index.html">
              <span class="material-icons-outlined">logout</span> Logout
            </a>
          </li>          
        </ul>
      </aside>
      <!-- End Sidebar -->

      <main class="main-container">
        <div class="main-cards">
          <div class="card">
            <div class="card-inner">
              <h3>Total Farmers</h3>
              <span class="material-icons-outlined">person</span>
            </div>
            <h1>249</h1>
          </div>

          <div class="card">
            <div class="card-inner">
              <h3>Mother seed count</h3>
              <span class="material-icons-outlined">grass</span>
            </div>
            <h1>25</h1>
          </div>

          <div class="card">
            <div class="card-inner">
              <h3>Hectares count</h3>
              <span class="material-icons-outlined">fullscreen</span>
            </div>
            <h1>1500</h1>
          </div>

          <div class="card">
            <div class="card-inner">
              <h3>Predicted Yield</h3>
              <span class="material-icons-outlined">grass</span>
            </div>
            <h1>56</h1>
          </div>  
        </div>
      </main>

      <canvas id="myLineChart"></canvas>

      <canvas id="myPieChart"></canvas>

      <div class="button-container">
        <button class="my-button">Update Yeild</button>
    </div>    

      <!-- End Main -->

    </div>
    
    <header class="header">
      <div class="menu-icon" onclick="openSidebar()">
        <span class="material-icons-outlined"></span>
      </div>
      <div class="main-title">
        <img src="../assets/logo.png" alt="Logo" class="logo">
      </div>
    </header>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
          // Add fade-in effect
          document.body.classList.add("fade-in");
      });
    </script>   

<script>
  // Get the canvas element
  const ctx = document.getElementById('myLineChart').getContext('2d');

  // Sample data
  const sampleData = [
    { Date: '2024-01-01', Yield_kg_per_hectare: 3500 },
    { Date: '2024-02-01', Yield_kg_per_hectare: 4000 },
    { Date: '2024-03-01', Yield_kg_per_hectare: 4500 },
    { Date: '2024-04-01', Yield_kg_per_hectare: 5000 },
    { Date: '2024-05-01', Yield_kg_per_hectare: 5500 },
    { Date: '2024-06-01', Yield_kg_per_hectare: 6000 },
    { Date: '2024-07-01', Yield_kg_per_hectare: 6500 },
    { Date: '2024-08-01', Yield_kg_per_hectare: 7000 },
    { Date: '2024-09-01', Yield_kg_per_hectare: 7500 },
    { Date: '2024-10-01', Yield_kg_per_hectare: 8000 },
    { Date: '2024-11-01', Yield_kg_per_hectare: 8500 },
    { Date: '2024-12-01', Yield_kg_per_hectare: 9000 }
  ];

  // Map the sample data to the appropriate format for the chart
  const labels = sampleData.map(item => item.Date); // Use Date as the x-axis labels
  const yieldData = sampleData.map(item => item.Yield_kg_per_hectare); // Use Yield as the y-axis data

  // Create the line chart with the sample data
  const myLineChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,  // X-axis labels (dates)
      datasets: [{
        label: 'Yield per Month',
        data: yieldData, // Y-axis data (yield per hectare)
        borderColor: 'blue',
        backgroundColor: 'rgba(0, 0, 255, 0.2)', // Fill color for the area
        borderWidth: 2,
        tension: 0.3 // Makes the line smooth
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          title: { display: true, text: 'Date' }
        },
        y: {
          title: { display: true, text: 'Yield (kg/hectare)' },
          beginAtZero: true
        }
      }
    }
  });
</script>

<script>
  // Get the canvas element
  const ctxPie = document.getElementById('myPieChart').getContext('2d');

  const myPieChart = new Chart(document.getElementById('myPieChart'), {
    type: 'pie',
    data: {
        labels: ['Rice', 'Corn', 'Wheat', 'Soybeans'],
        datasets: [{
            data: [40, 30, 15, 15],
            backgroundColor: ['red', 'blue', 'green', 'yellow'],
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false, // Allows resizing
        plugins: {
            legend: {
                display: false // Hides the labels
            }
        },
        layout: {
            padding: 20 // Optional padding inside chart area
        },
        // Increase the quality by adjusting device pixel ratio
        devicePixelRatio: window.devicePixelRatio > 1 ? 2 : 1
    }
});
</script>
</body>
</html>
